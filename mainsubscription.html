<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/83a5399452.js" crossorigin="anonymous"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="stylesheet" href="/subcard2.css">
    <link rel="stylesheet" href="/bird.css">


    <style>
      button {
	outline: none;
}
button:focus {
	outline: none;
}
        body {
            background-image: url('/clouds-anim.svg');
            background-repeat: no-repeat;
            background-size: cover;
        }
        .btn-warning:hover {
            border-color: #ffc107;
            background-color: #ffc107;
        }
        button.button {
  font-size: 16px;
  font-weight: 600;
  color: white;
  display: inline-block;
  float: right;
  text-decoration: none;
  -webkit-border-radius: 5px; 
  -moz-border-radius: 5px; 
  border-radius: 5px; 
  background-color: #3a57af; 
  border: none;
  transition: all 0.1s linear 0s; 
  top: 0px;
  position: relative;
  width: 100%;
}
.p-features {
    color: #016FF9;
    font-weight: 600;
    letter-spacing: 1px;
    padding: 0;
    font-size: 13px;
    /* display: flex; */
    /* flex-direction: column; */
    /* justify-content: space-around; */
}
    </style>
    </head>

    <body>
        <div style="height: fit-content;width: 100vw;background-image: url('/clouds-anim.svg');overflow-y: auto;" class="">
            <div class="d-flex flex-column container mx-auto my-auto">
                <div class="faq-table p-0 mb-3 mt-3 pl-2 pr-2 pt-1 pb-1" style="text-align: center;border-radius: 15px;">
                    <h6 class="mx-auto pricing-price pl-3 pr-3 pb-1" style="border-bottom: 5px solid;font-size: 27px !important; color: black;">Select Payment Plan</h6>
                </div>
                <div class="panel faq-table mb-4 d-flex flex-column">
                    <span class="pricing-price mb-3 mx-auto pl-3 pr-3" style="color:#FF7518 !important;border-bottom: 5px solid #FF7518;"><img src="/cloud-loading-2.svg" style="width: 60px;height: 60px;" /> Icarus X</span>
                      <div class="d-flex flex-row mb-4 justify-content-center">
                        <div id="mon" class="panel faq-table p-0 mr-4" style="transform: scale(1.1);text-align: center; width: fit-content;height: fit-content;">
                          <h6 class="p-2" style="color: #077bff;font-weight: bold;">$150</br>Per Month</h6>
                          <div id="monc" style="width: 100%;height: fit-content;background-color: #077bff;border-radius: 0 0 10px 10px;">
                            <i class="fas fa-check pt-1 pb-1" style="color: white;"></i>
                          </div>
                        </div>
                        <div id="year" class="panel faq-table p-0" style="text-align: center; width: fit-content;height: fit-content;">
                          <h6 class="p-2" style="color: #077bff;font-weight: bold;">$1400</br>Per Anum</h6>
                          <div id="yearc" style="display: none;width: 100%;height: fit-content;background-color: #077bff;border-radius: 0 0 10px 10px;">
                            <i class="fas fa-check pt-1 pb-1" style="color: white;"></i>
                          </div>
                        </div>
                      </div>
                      <p class="pricing-features d-flex flex-row" style="font-size: 16px;text-align: center;font-weight: bold;">30 Day Money-Back Gaurantee</p>
                      <p class="pricing-features" style="font-size: 12px;text-align: center;">Not for you? Cancel your subscription within the first 30 days and get an automatic refund!</p>
                      <button data-toggle="modal" data-target="#exampleModalCenter" id="feat" class="btn btn-primary mb-3" style="font-weight: bold;">Features<i class="fas fa-chevron-right pt-1" style="float: right;"></i></button>
                      <button id="sub" class="button btn" style="font-weight: bold;">Subscribe<i class="fas fa-chevron-right pt-1" style="float: right;"></i></button>
                </div>
                <div class="panel faq-table d-flex flex-column mb-4 justify-content-center">
                    <span class="pricing-price" style="text-align: center;"><i class="far fa-envelope"></i></span>
                    <p class="pricing-features mt-1" style="text-align: center;">Have any questions? Email us!</p>
                    <button id="contact" class="btn btn-primary" style="font-weight: bold;">Send Email<i class="fas fa-chevron-right pt-1" style="float: right;"></i></button>
                </div>
                
            </div>
        </div>

        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
            
                  
                
                  <div class="panel pricing-table container">
          
              <div class="d-flex flex-column container pt-4">
                <div class="pricing-plan">
                    <ul class="anim pricing-features mb-3" style="list-style: none;">
                      <li class="mb-3 pricing-features-item"><i class="fas fa-check"></i>&nbsp;No Configuration/Setup Required</li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;Strict Broker Requirements</li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;1%/3% Equity Risk per Trade</li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;Analytics Dashboard</li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;Manage Billing with&nbsp;<i style="color: purple;font-size: 2rem;position: relative;top: 7px;" class="fab fa-stripe"></i></li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;99.9% Server Uptime</li>
                      <li class="mb-3 pricing-features-item cnttxt"><i class="fas fa-check"></i>&nbsp;24/7 Customer Support</li>
                    </ul>
                  </div>

          </div>
          </div>
              
            </div>
          </div>

        <script>
          var monplan = true;
          var yearplan = false;
            var handleFetchResult = function(result) {
    if (!result.ok) {
      return result.json().then(function(json) {
        if (json.error && json.error.message) {
          throw new Error(result.url + ' ' + result.status + ' ' + json.error.message);
        }
      }).catch(function(err) {
        showErrorMessage(err);
        throw err;
      });
    }
    return result.json();
  };
  
  // Create a Checkout Session with the selected plan ID
  var createCheckoutSession = function(priceId) {
    return fetch("/create-checkout-session", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        priceId: priceId
      })
    }).then(handleFetchResult);
  };
  
  // Handle any errors returned from Checkout
  var handleResult = function(result) {
    if (result.error) {
      showErrorMessage(result.error.message);
    }
  };
  
  var showErrorMessage = function(message) {
    var errorEl = document.getElementById("error-message")
    errorEl.innerText = message;
    errorEl.style.display = "block";
  };
            $(function () {
  $('#contact').click(function (event) {
    var email = 'support@icarusinvestments.cloud';
    var subject = 'Customer Support';
    var emailBody = '';
    var attach = 'path';
    document.location = "mailto:"+email+"?subject="+subject+"&body="+emailBody;
  });
});

document.getElementById("mon").addEventListener("click", (event) => {
  event.preventDefault();
  document.getElementById('yearc').style.display = "none"
  document.getElementById('year').style.transform = "none"
  document.getElementById('monc').style.display = "block"
  document.getElementById('mon').style.transform = "scale(1.1)"
  monplan = true;
  yearplan = true;
})

document.getElementById("year").addEventListener("click", (event) => {
  event.preventDefault();
  document.getElementById('monc').style.display = "none"
  document.getElementById('mon').style.transform = "none"
  document.getElementById('yearc').style.display = "block"
  document.getElementById('year').style.transform = "scale(1.1)"
  monplan = false;
  yearplan = true;
})

            document
      .getElementById("sub")
      .addEventListener("click", (event) => {
        event.preventDefault();
        document.getElementById("sub").innerText = "";
        document.getElementById("sub").innerHTML = `<div class="spinner-border text-warning align-self-center" role="status" style="width: 20px; height: 20px; border-width: 3px;">
    </div>`
if(monplan && !yearplan){
    fetch("/setup")
.then(handleFetchResult)
.then(function(json) {
  var publishableKey = json.publishableKey;
  var monPriceId = json.monPrice;

  var stripe = Stripe(publishableKey);
      createCheckoutSession(monPriceId).then(function(data) {
        // Call Stripe.js method to redirect to the new Checkout page
        stripe
          .redirectToCheckout({
            sessionId: data.sessionId
          })
          .then(handleResult);
      });
    

  // Setup event handler to create a Checkout Session when button is clicked
});
} else if(yearplan && !monplan){
    fetch("/setup")
.then(handleFetchResult)
.then(function(json) {
  var publishableKey = json.publishableKey;
  var yearPriceId = json.yearPrice;

  var stripe = Stripe(publishableKey);
      createCheckoutSession(yearPriceId).then(function(data) {
        // Call Stripe.js method to redirect to the new Checkout page
        stripe
          .redirectToCheckout({
            sessionId: data.sessionId
          })
          .then(handleResult);
      });
    

  // Setup event handler to create a Checkout Session when button is clicked
});
}
});


        </script>

    </body>